<h1>
  Juan Gallego IV: Notes <%= "on #{params[:tag]}" if params[:tag].present? %> 
</h1>

<% if logged_in? %>
  <ul class="note-actions">
    <li><%= link_to "New note", new_note_path %></li>
  </ul>
<% end %>

<p>
  Browse by tag:

  <%= @tags
    .map { |tag, count| "#{link_to tag, notes_path(tag: tag)} #{count}" }
    .join(" Â· ") 
    .html_safe %>
</p>

<h2>Recent notes</h2>

<ul id="notes">
  <% @notes.each do |note| %>
    <li>
      <h3><%= link_to note.title, note %> - <%= note.created_at.strftime("%Y-%m-%d") %></h3>
      <%= "ðŸ”’" if note.private? %>
      <%= note.tags.map { |tag| link_to "##{tag}", notes_path(tag: tag) }.join(" ").html_safe %>

      <p><%= truncate(note.intro, length: 200)  %></p>
    </li>
  <% end %>
</ul>
